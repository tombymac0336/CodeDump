REM Re: Creating of a batch file and Copy file to Machines


REM Code:
@echo off

(Set FileSource=c:\data\scripts\UniversalForwarder\*.*)
(Set RemoteDestinationFolder=c:\Windows\Temp)

(Set InputFile=c:\data\scripts\Computers.txt)

(Set RemoteDestination=\\%%*\%RemoteDestinationFolder::=$%\)
For /F "eol=;" %%* in ('type "%InputFile%"') do (
 Ping.exe -n 2 -w 750 %%* | Find/i "TTL=" >Nul&&(
 xcopy /y "%FileSource%" "%RemoteDestination%")||(
  echo.%%* "Computer was Not found">>%InputFile%.errors.log)
 If Not ErrorLevel 0 echo.%%* "Copy was unsuccesfull">>%InputFile%.errors.log
 (Set ErrorLevel=)
 )

pause

REM Note: for "RemoteDestinationFolder" use the local path!, the batch will translate that to a  networkpath.
 REM The batch creates an errorlog containting the names of the computers that were not on-line that moment. REM You can use the errorlog as the new inputfile, to re-run the batch.
